require=function t(e,o,a){function r(n,l){if(!o[n]){if(!e[n]){var i="function"==typeof require&&require;if(!l&&i)return i(n,!0);if(c)return c(n,!0);var s=new Error("Cannot find module '"+n+"'");throw s.code="MODULE_NOT_FOUND",s}var d=o[n]={exports:{}};e[n][0].call(d.exports,function(t){var o=e[n][1][t];return r(o||t)},d,d.exports,t,e,o,a)}return o[n].exports}for(var c="function"==typeof require&&require,n=0;n<a.length;n++)r(a[n]);return r}({BalanceFormatter:[function(t,e,o){"use strict";cc._RF.push(e,"b0386ICFmpJBqU/vG4m56VJ","BalanceFormatter"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,c=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.formatBTC=function(t){var e=Math.max(0,Math.floor(Math.log(t)/Math.LN10));return t.toFixed(Math.max(0,8-e))},e.formatCNY=function(t){var e=Math.max(0,Math.floor(Math.log(t)/Math.LN10));return t.toFixed(Math.min(2,Math.max(0,8-e)))},e=__decorate([r],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],Core:[function(t,e,o){"use strict";cc._RF.push(e,"83f84Pc5Y5I4qWaG8Dz/vlO","Core"),Object.defineProperty(o,"__esModule",{value:!0});var a=t("./MainCtrl"),r=t("./BalanceFormatter"),c=cc._decorator,n=c.ccclass,l=c.property,i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fiatBalance=0,e.btcBalance=0,e.t=0,e.interval=.2,e.nextDayCountdown=1e8,e.dayWidth=3,e.width=450,e.height=345,e.lblPrice=null,e.lblDate=null,e.lblFiatBalance=null,e.lblBtcBalance=null,e.lblTotal=null,e.graphics=null,e}return __extends(e,t),o=e,e.prototype.BuyAll=function(){console.log("全仓买入");var t=a.MainCtrl.Instance.BTCHistory[this.t].close,e=Math.min(2e7-this.btcBalance,this.fiatBalance/t);this.btcBalance+=e,this.fiatBalance-=e*t},e.prototype.SellAll=function(){console.log("全仓卖出");var t=a.MainCtrl.Instance.BTCHistory[this.t].close,e=this.btcBalance;this.fiatBalance+=e*t,this.btcBalance-=e},e.prototype.restart=function(){this.fiatBalance=100/o.USD2CNY,this.btcBalance=0,this.t=0,this.nextDayCountdown=this.interval,this.historicalHighestPrice=0,this.graphics.moveTo(0,0)},e.prototype.update=function(t){var e=a.MainCtrl.Instance.BTCHistory;if(!(this.t>=e.length)&&(this.nextDayCountdown-=t,this.nextDayCountdown<=0)){this.nextDayCountdown+=this.interval;var c=e[this.t].close;c>this.historicalHighestPrice&&(this.historicalHighestPrice=c),this.graphics.clear(),this.graphics.moveTo(0,0),this.graphics.lineTo(this.width,0);var n=.9*this.height/this.historicalHighestPrice,l=Math.max(0,this.t-this.width/this.dayWidth);this.graphics.moveTo(0,e[l].close*n);for(var i=l+1;i<=this.t;i++)this.graphics.lineTo((i-l)*this.dayWidth,e[i].close*n);this.graphics.stroke(),this.lblPrice.string="￥"+r.default.formatCNY(c*o.USD2CNY),this.lblDate.string=e[this.t].date,this.lblFiatBalance.string=r.default.formatCNY(this.fiatBalance*o.USD2CNY)+"CNY",this.lblBtcBalance.string=r.default.formatBTC(this.btcBalance)+"BTC";var s=this.fiatBalance/c+this.btcBalance;this.lblTotal.string=r.default.formatCNY(s*c*o.USD2CNY)+"CNY = "+r.default.formatBTC(s)+"BTC",this.t++,this.t>=e.length&&(a.MainCtrl.Instance.lastScore=s,a.MainCtrl.Instance.lastPrice=c,setTimeout(function(){a.MainCtrl.Instance.GotoResult()},2))}},e.USD2CNY=6.3,__decorate([l(cc.Label)],e.prototype,"lblPrice",void 0),__decorate([l(cc.Label)],e.prototype,"lblDate",void 0),__decorate([l(cc.Label)],e.prototype,"lblFiatBalance",void 0),__decorate([l(cc.Label)],e.prototype,"lblBtcBalance",void 0),__decorate([l(cc.Label)],e.prototype,"lblTotal",void 0),__decorate([l(cc.Graphics)],e.prototype,"graphics",void 0),e=o=__decorate([n],e);var o}(cc.Component);o.Core=i,cc._RF.pop()},{"./BalanceFormatter":"BalanceFormatter","./MainCtrl":"MainCtrl"}],Helloworld:[function(t,e,o){"use strict";cc._RF.push(e,"e1b90/rohdEk4SdmmEZANaD","Helloworld"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,c=a.property,n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return __extends(e,t),e.prototype.start=function(){this.label.string=this.text},__decorate([c(cc.Label)],e.prototype,"label",void 0),__decorate([c],e.prototype,"text",void 0),e=__decorate([r],e)}(cc.Component);o.default=n,cc._RF.pop()},{}],Leaderboard:[function(t,e,o){"use strict";cc._RF.push(e,"8c6944j/7xE5Zvme1I3sc/D","Leaderboard"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,c=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e=__decorate([r],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],MainCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"e4b263diNNBEoO04d4lNHHp","MainCtrl"),Object.defineProperty(o,"__esModule",{value:!0});var a=t("./Core"),r=cc._decorator,c=r.ccclass,n=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BTCData=null,e.spriteFrame=null,e.BTCHistory=null,e.lastScore=0,e.lastPrice=0,e.HomeUI=null,e.CoreUI=null,e.ResultUI=null,e.LeaderboardUI=null,e.UploadUI=null,e}return __extends(e,t),o=e,e.prototype.onLoad=function(){o.Instance=this,cc.loader.loadRes("BTC",function(t,e){console.log("BTCHistory loaded",typeof e,e),this.BTCHistory=e}.bind(this))},e.prototype.start=function(){this.node.children.forEach(function(t){t.active=!1}),this.HomeUI.active=!0},e.prototype.OnBtnStartClick=function(){this.node.children.forEach(function(t){t.active=!1}),this.CoreUI.active=!0,this.CoreUI.getComponent(a.Core).restart()},e.prototype.GotoResult=function(){this.node.children.forEach(function(t){t.active=!1}),this.ResultUI.active=!0},e.prototype.GotoLeaderboard=function(){this.node.children.forEach(function(t){t.active=!1}),this.LeaderboardUI.active=!0},e.prototype.GotoUpload=function(){this.node.children.forEach(function(t){t.active=!1}),this.UploadUI.active=!0},e.prototype.GotoHome=function(){this.node.children.forEach(function(t){t.active=!1}),this.HomeUI.active=!0},__decorate([n(cc.TextAsset)],e.prototype,"BTCData",void 0),__decorate([n(cc.SpriteFrame)],e.prototype,"spriteFrame",void 0),__decorate([n(cc.Node)],e.prototype,"HomeUI",void 0),__decorate([n(cc.Node)],e.prototype,"CoreUI",void 0),__decorate([n(cc.Node)],e.prototype,"ResultUI",void 0),__decorate([n(cc.Node)],e.prototype,"LeaderboardUI",void 0),__decorate([n(cc.Node)],e.prototype,"UploadUI",void 0),e=o=__decorate([c],e);var o}(cc.Component);o.MainCtrl=l,cc._RF.pop()},{"./Core":"Core"}],ResultUI:[function(t,e,o){"use strict";cc._RF.push(e,"821deNcGNFGUrcGhvxyRLk4","ResultUI"),Object.defineProperty(o,"__esModule",{value:!0});var a=t("./MainCtrl"),r=t("./Core"),c=t("./BalanceFormatter"),n=cc._decorator,l=n.ccclass,i=n.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lblTotalBTC=null,e.lblTotalCNY=null,e}return __extends(e,t),e.prototype.start=function(){var t=a.MainCtrl.Instance.lastScore;this.lblTotalBTC.string=c.default.formatBTC(t)+"BTC",this.lblTotalCNY.string="=￥"+c.default.formatCNY(t*a.MainCtrl.Instance.lastPrice*r.Core.USD2CNY)},__decorate([i(cc.Label)],e.prototype,"lblTotalBTC",void 0),__decorate([i(cc.Label)],e.prototype,"lblTotalCNY",void 0),e=__decorate([l],e)}(cc.Component);o.default=s,cc._RF.pop()},{"./BalanceFormatter":"BalanceFormatter","./Core":"Core","./MainCtrl":"MainCtrl"}],UploadUI:[function(t,e,o){"use strict";cc._RF.push(e,"7f006caj/dGN5O0ODkhK1Hx","UploadUI"),Object.defineProperty(o,"__esModule",{value:!0});var a=t("./MainCtrl"),r=t("./BalanceFormatter"),c=cc._decorator,n=c.ccclass,l=c.property,i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lblTotalBTC=null,e.edtDonate=null,e}return __extends(e,t),e.prototype.start=function(){var t=a.MainCtrl.Instance.lastScore;this.lblTotalBTC.string=r.default.formatBTC(t)+"BTC"},e.prototype.onUploadBtnClick=function(){try{var t=parseFloat(this.edtDonate.string);console.log("调用钱包",a.MainCtrl.Instance.lastScore,t)}catch(t){console.error(t)}},__decorate([l(cc.Label)],e.prototype,"lblTotalBTC",void 0),__decorate([l(cc.EditBox)],e.prototype,"edtDonate",void 0),e=__decorate([n],e)}(cc.Component);o.default=i,cc._RF.pop()},{"./BalanceFormatter":"BalanceFormatter","./MainCtrl":"MainCtrl"}]},{},["BalanceFormatter","Core","Helloworld","Leaderboard","MainCtrl","ResultUI","UploadUI"]);