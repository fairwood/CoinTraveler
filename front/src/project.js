require=function t(e,o,r){function a(c,i){if(!o[c]){if(!e[c]){var l="function"==typeof require&&require;if(!i&&l)return l(c,!0);if(n)return n(c,!0);var s=new Error("Cannot find module '"+c+"'");throw s.code="MODULE_NOT_FOUND",s}var d=o[c]={exports:{}};e[c][0].call(d.exports,function(t){var o=e[c][1][t];return a(o||t)},d,d.exports,t,e,o,r)}return o[c].exports}for(var n="function"==typeof require&&require,c=0;c<r.length;c++)a(r[c]);return a}({BalanceFormatter:[function(t,e,o){"use strict";cc._RF.push(e,"b0386ICFmpJBqU/vG4m56VJ","BalanceFormatter"),Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,n=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.formatBTC=function(t){var e=Math.max(0,Math.floor(Math.log(t)/Math.LN10));return t.toFixed(Math.max(0,8-e))},e.formatNAS=function(t){var e=Math.max(0,Math.floor(Math.log(t)/Math.LN10));return t.toFixed(Math.min(4,Math.max(0,4-e)))},e.formatCNY=function(t){var e=Math.max(0,Math.floor(Math.log(t)/Math.LN10));return t.toFixed(Math.min(2,Math.max(0,8-e)))},e=__decorate([a],e)}(cc.Component));o.default=n,cc._RF.pop()},{}],Core:[function(t,e,o){"use strict";cc._RF.push(e,"83f84Pc5Y5I4qWaG8Dz/vlO","Core"),Object.defineProperty(o,"__esModule",{value:!0});var r=t("./MainCtrl"),a=t("./BalanceFormatter"),n=cc._decorator,c=n.ccclass,i=n.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fiatBalance=0,e.btcBalance=0,e.t=0,e.interval=1,e.nextDayCountdown=1e8,e.speedMods=[0,5,20,100],e.speedersButton=[!1,!1,!1,!1],e.speedersKeyboard=[!1,!1,!1,!1],e.dayWidth=3,e.width=450,e.height=345,e.lblPrice=null,e.lblDate=null,e.lblFiatBalance=null,e.lblBtcBalance=null,e.lblTotal=null,e.graphics=null,e.lastOper=null,e.lblLastOper=null,e.highestLine=null,e.lblSpeed=null,e.btnSpeeds=[],e.lastOperDir=null,e.lastOperPrice=null,e}return __extends(e,t),o=e,e.prototype.onLoad=function(){for(var t=this,e=function(e){var r=o.btnSpeeds[e];r.node.on(cc.Node.EventType.TOUCH_START,function(o){t.speedersButton[e]=!0}),r.node.on(cc.Node.EventType.TOUCH_END,function(o){t.speedersButton[e]=!1}),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(e){switch(console.log("keyCode",e.keyCode),e.keyCode){case cc.KEY[1]:t.speedersKeyboard[0]=!0;break;case cc.KEY[2]:t.speedersKeyboard[1]=!0;break;case cc.KEY[3]:t.speedersKeyboard[2]=!0;break;case cc.KEY[4]:t.speedersKeyboard[3]=!0}}),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,function(e){switch(e.keyCode){case cc.KEY[1]:t.speedersKeyboard[0]=!1;break;case cc.KEY[2]:t.speedersKeyboard[1]=!1;break;case cc.KEY[3]:t.speedersKeyboard[2]=!1;break;case cc.KEY[4]:t.speedersKeyboard[3]=!1}})},o=this,r=0;r<this.btnSpeeds.length;r++)e(r);cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(e){switch(e.keyCode){case cc.KEY.j:t.BuyAll();break;case cc.KEY.k:t.SellAll()}})},e.prototype.BuyAll=function(){console.log("全仓买入");var t=r.MainCtrl.Instance.BTCHistory[this.t].close,e=Math.min(2e7-this.btcBalance,this.fiatBalance/t);this.btcBalance+=e,this.fiatBalance-=e*t,this.lastOperDir=1,this.lastOperPrice=t},e.prototype.SellAll=function(){console.log("全仓卖出");var t=r.MainCtrl.Instance.BTCHistory[this.t].close,e=this.btcBalance;this.fiatBalance+=e*t,this.btcBalance-=e,this.lastOperDir=2,this.lastOperPrice=t},e.prototype.restart=function(){this.fiatBalance=100/o.USD2CNY,this.btcBalance=0,this.t=0,this.nextDayCountdown=0,this.historicalHighestPrice=0,this.graphics.moveTo(0,0),this.lastOper.active=!1,this.lastOperDir=null,this.lastOperPrice=null,this.highestLine.position=new cc.Vec2(0,0)},e.prototype.update=function(t){var e=r.MainCtrl.Instance.BTCHistory;if(!(this.t>=e.length-1)){for(var n=1,c=0;c<this.speedersButton.length;c++)(this.speedersButton[c]||this.speedersKeyboard[c])&&(n*=this.speedMods[c]);for(this.lblSpeed.string=(n/this.interval).toFixed()+"天/s",this.nextDayCountdown-=t*n;this.nextDayCountdown<=0&&this.t<e.length-1;){this.t++,this.nextDayCountdown+=this.interval;var i=e[this.t].close;i>this.historicalHighestPrice&&(this.historicalHighestPrice=i)}this.graphics.clear(),this.graphics.moveTo(0,0),this.graphics.lineTo(this.width,0);var l=.96*this.height/this.historicalHighestPrice,s=Math.max(0,this.t-this.width/this.dayWidth);this.graphics.moveTo(0,e[s].close*l);for(c=s+1;c<=this.t;c++)this.graphics.lineTo((c-s)*this.dayWidth,e[c].close*l);this.graphics.stroke(),this.lastOperDir?(this.lastOper.position=new cc.Vec2(0,this.lastOperPrice*l),this.lblLastOper.string=1==this.lastOperDir?"最近买入":"最近卖出",this.lastOper.active=!0):this.lastOper.active=!1,this.highestLine.position=new cc.Vec2(0,this.historicalHighestPrice*l);var d=e[this.t].close;this.lblPrice.string="￥"+a.default.formatCNY(d*o.USD2CNY),this.lblDate.string=e[this.t].date,this.lblFiatBalance.string=a.default.formatCNY(this.fiatBalance*o.USD2CNY)+"CNY",this.lblBtcBalance.string=a.default.formatBTC(this.btcBalance)+"BTC";var p=this.fiatBalance/d+this.btcBalance;this.lblTotal.string=a.default.formatCNY(p*d*o.USD2CNY)+"CNY = "+a.default.formatBTC(p)+"BTC",this.t>=e.length-1&&(r.MainCtrl.Instance.lastScore=p,r.MainCtrl.Instance.lastPrice=d,console.log("End"),setTimeout(function(){r.MainCtrl.Instance.GotoResult()},1e3))}},e.USD2CNY=6.3,__decorate([i(cc.Label)],e.prototype,"lblPrice",void 0),__decorate([i(cc.Label)],e.prototype,"lblDate",void 0),__decorate([i(cc.Label)],e.prototype,"lblFiatBalance",void 0),__decorate([i(cc.Label)],e.prototype,"lblBtcBalance",void 0),__decorate([i(cc.Label)],e.prototype,"lblTotal",void 0),__decorate([i(cc.Graphics)],e.prototype,"graphics",void 0),__decorate([i(cc.Node)],e.prototype,"lastOper",void 0),__decorate([i(cc.Label)],e.prototype,"lblLastOper",void 0),__decorate([i(cc.Node)],e.prototype,"highestLine",void 0),__decorate([i(cc.Label)],e.prototype,"lblSpeed",void 0),__decorate([i([cc.Button])],e.prototype,"btnSpeeds",void 0),e=o=__decorate([c],e);var o}(cc.Component);o.Core=l,cc._RF.pop()},{"./BalanceFormatter":"BalanceFormatter","./MainCtrl":"MainCtrl"}],Helloworld:[function(t,e,o){"use strict";cc._RF.push(e,"e1b90/rohdEk4SdmmEZANaD","Helloworld"),Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,n=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return __extends(e,t),e.prototype.start=function(){this.label.string=this.text},__decorate([n(cc.Label)],e.prototype,"label",void 0),__decorate([n],e.prototype,"text",void 0),e=__decorate([a],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],HomeUI:[function(t,e,o){"use strict";cc._RF.push(e,"6b88eEl0rxJlafriia9L0dd","HomeUI"),Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,n=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnDonate=null,e.btnInstallWallet=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.btnDonate.node.active=!1,this.btnInstallWallet.node.active=!0},e.prototype.onInstallWalletBtnClick=function(){window.open("https://github.com/ChengOrangeJu/WebExtensionWallet")},e.prototype.update=function(){},e.firstTime=!0,__decorate([n(cc.Button)],e.prototype,"btnDonate",void 0),__decorate([n(cc.Button)],e.prototype,"btnInstallWallet",void 0),e=__decorate([a],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],Leaderboard:[function(t,e,o){"use strict";cc._RF.push(e,"8c6944j/7xE5Zvme1I3sc/D","Leaderboard"),Object.defineProperty(o,"__esModule",{value:!0});var r=t("./BalanceFormatter"),a=cc._decorator,n=a.ccclass,c=a.property,i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.template=null,e.container=null,e.elements=[],e.tab=0,e}return __extends(e,t),o=e,e.prototype.onLoad=function(){o.scoreBoard=[["1a382nsndofwenoi",80432049.023904,1235332.43,"挺好的游戏"],["2dno0i2jsdofiji",23432049.023904,33982.43,"教会我很多"],["9034sdnfowoofiewo",432049.023904,.43,"震撼！！！"],["jiregj9020439jiooioj39j04",10431.24,.0143,"支持！"]],o.donationBoard=[["1a382nsndofwenoi",2353.023904,332.43,"挺好的游戏"],["2dno0i2jsdofiji",2352.023904,132.43,"教会我很多"],["9034sdnfowoofiewo",432049.023904,32.43,"震撼！！！"],["jiregj9020439jiooioj39j04",10431.24,2.43,"支持！"]];for(var t=0;t<o.ElementCount;t++){var e=cc.instantiate(this.template);this.elements[t]=e,e.parent=this.container,e.name=t.toFixed(),this.setAndRefreshElement(t,e,[null,null,null,null])}},e.prototype.setAndRefreshElement=function(t,e,o){console.log("sar",t,o),o||(o=[null,null,null,null]),e.getChildByName("LblAddress").getComponent(cc.Label).string=t.toFixed()+"  "+(o[0]?o[0]:""),e.getChildByName("LblScore").getComponent(cc.Label).string=o[0]?"分数"+r.default.formatBTC(o[1])+"BTC":"",e.getChildByName("LblDonation").getComponent(cc.Label).string=o[0]?"捐赠"+r.default.formatNAS(o[2])+"NAS":"",e.getChildByName("LblComment").getComponent(cc.Label).string=o[3]?o[3]:""},e.prototype.switchTab=function(t,e){switch(e){case"score":console.log("tab",e);for(var r=0;r<this.elements.length;r++){var a=this.elements[r];this.setAndRefreshElement(r,a,r<o.scoreBoard.length?o.scoreBoard[r]:null)}break;case"donation":for(r=0;r<this.elements.length;r++){a=this.elements[r];this.setAndRefreshElement(r,a,r<o.donationBoard.length?o.donationBoard[r]:null)}}},e.ElementCount=20,__decorate([c(cc.Node)],e.prototype,"template",void 0),__decorate([c(cc.Node)],e.prototype,"container",void 0),e=o=__decorate([n],e);var o}(cc.Component);o.default=i,cc._RF.pop()},{"./BalanceFormatter":"BalanceFormatter"}],MainCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"e4b263diNNBEoO04d4lNHHp","MainCtrl"),Object.defineProperty(o,"__esModule",{value:!0});var r=t("./Core"),a=cc._decorator,n=a.ccclass,c=a.property,i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BTCData=null,e.spriteFrame=null,e.BTCHistory=null,e.lastScore=0,e.lastPrice=0,e.HomeUI=null,e.CoreUI=null,e.ResultUI=null,e.LeaderboardUI=null,e.UploadUI=null,e}return __extends(e,t),o=e,e.prototype.onLoad=function(){o.Instance=this,document.title="NAS|币圈穿越记",cc.loader.loadRes("BTC",function(t,e){console.log("BTCHistory loaded",typeof e,e),this.BTCHistory=e}.bind(this))},e.prototype.start=function(){this.node.children.forEach(function(t){t.active=!1}),this.HomeUI.active=!0},e.prototype.OnBtnStartClick=function(){this.node.children.forEach(function(t){t.active=!1}),this.CoreUI.active=!0,this.CoreUI.getComponent(r.Core).restart()},e.prototype.GotoResult=function(){this.node.children.forEach(function(t){t.active=!1}),this.ResultUI.active=!0},e.prototype.GotoLeaderboard=function(){this.node.children.forEach(function(t){t.active=!1}),this.LeaderboardUI.active=!0},e.prototype.GotoDonate=function(){this.lastScore=null,this.node.children.forEach(function(t){t.active=!1}),this.UploadUI.active=!0},e.prototype.GotoUpload=function(){this.node.children.forEach(function(t){t.active=!1}),this.UploadUI.active=!0},e.prototype.GotoHome=function(){this.node.children.forEach(function(t){t.active=!1}),this.HomeUI.active=!0},__decorate([c(cc.TextAsset)],e.prototype,"BTCData",void 0),__decorate([c(cc.SpriteFrame)],e.prototype,"spriteFrame",void 0),__decorate([c(cc.Node)],e.prototype,"HomeUI",void 0),__decorate([c(cc.Node)],e.prototype,"CoreUI",void 0),__decorate([c(cc.Node)],e.prototype,"ResultUI",void 0),__decorate([c(cc.Node)],e.prototype,"LeaderboardUI",void 0),__decorate([c(cc.Node)],e.prototype,"UploadUI",void 0),e=o=__decorate([n],e);var o}(cc.Component);o.MainCtrl=i,cc._RF.pop()},{"./Core":"Core"}],ResultUI:[function(t,e,o){"use strict";cc._RF.push(e,"821deNcGNFGUrcGhvxyRLk4","ResultUI"),Object.defineProperty(o,"__esModule",{value:!0});var r=t("./MainCtrl"),a=t("./Core"),n=t("./BalanceFormatter"),c=cc._decorator,i=c.ccclass,l=c.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lblTotalBTC=null,e.lblTotalCNY=null,e.intervals=[1,2,2,4,3],e}return __extends(e,t),e.prototype.start=function(){var t=r.MainCtrl.Instance.lastScore;this.lblTotalBTC.string=n.default.formatBTC(t)+"BTC",this.lblTotalCNY.string="=￥"+n.default.formatCNY(t*r.MainCtrl.Instance.lastPrice*a.Core.USD2CNY);for(var e=this.node.children,o=0,c=0;c<e.length;c++){var i=e[c];i.opacity=0,o+=c<this.intervals.length?this.intervals[c]:0;var l=cc.sequence(cc.delayTime(o),cc.fadeIn(.5));i.runAction(l)}},__decorate([l(cc.Label)],e.prototype,"lblTotalBTC",void 0),__decorate([l(cc.Label)],e.prototype,"lblTotalCNY",void 0),e=__decorate([i],e)}(cc.Component);o.default=s,cc._RF.pop()},{"./BalanceFormatter":"BalanceFormatter","./Core":"Core","./MainCtrl":"MainCtrl"}],UploadUI:[function(t,e,o){"use strict";cc._RF.push(e,"7f006caj/dGN5O0ODkhK1Hx","UploadUI"),Object.defineProperty(o,"__esModule",{value:!0});var r=t("./MainCtrl"),a=t("./BalanceFormatter"),n=cc._decorator,c=n.ccclass,i=n.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lblTotalBTC=null,e.edtComment=null,e.edtDonate=null,e.grpWithScore=null,e.grpNoScore=null,e.lblSend=null,e}return __extends(e,t),e.prototype.start=function(){var t=r.MainCtrl.Instance.lastScore;t?(this.lblTotalBTC.string=a.default.formatBTC(t)+"BTC",this.grpWithScore.active=!0,this.grpNoScore.active=!1,this.lblSend.string="上传到时间机器"):(this.grpWithScore.active=!1,this.grpNoScore.active=!0,this.lblSend.string="发送捐赠")},e.prototype.onUploadBtnClick=function(){try{var t=parseFloat(this.edtDonate.string),e=this.edtComment.string;console.log("调用钱包",r.MainCtrl.Instance.lastScore,t,e)}catch(t){console.error(t)}},__decorate([i(cc.Label)],e.prototype,"lblTotalBTC",void 0),__decorate([i(cc.EditBox)],e.prototype,"edtComment",void 0),__decorate([i(cc.EditBox)],e.prototype,"edtDonate",void 0),__decorate([i(cc.Node)],e.prototype,"grpWithScore",void 0),__decorate([i(cc.Node)],e.prototype,"grpNoScore",void 0),__decorate([i(cc.Label)],e.prototype,"lblSend",void 0),e=__decorate([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./BalanceFormatter":"BalanceFormatter","./MainCtrl":"MainCtrl"}]},{},["BalanceFormatter","Core","Helloworld","HomeUI","Leaderboard","MainCtrl","ResultUI","UploadUI"]);